---

---

<!-- Block until theme class is set -->
<script is:inline>
  /**
   * Check if dark theme is preferred or set by user
   */
  const isDarkTheme = () => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("darkMode")) {
      return localStorage.getItem("darkMode");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      return "true";
    }
    return "false";
  };

  const createThemeColorMetaTag = () => {
    // Set theme color immediately to prevent blinking
    const themeColor = isDarkTheme() === "true" ? "#2b333b" : "#fad0b0";
    const metaThemeColor = document.createElement("meta");
    metaThemeColor.setAttribute("name", "theme-color");
    metaThemeColor.setAttribute("content", themeColor);
    document.head.appendChild(metaThemeColor);
  };

  /**
   * Set dark theme class
   */
  const setDarkClass = () => {
    const htmlClasses = document.documentElement.classList;

    if (isDarkTheme() === "false") {
      htmlClasses.remove("dark");
    } else {
      htmlClasses.add("dark");
    }
  };

  setDarkClass();
  createThemeColorMetaTag();

  localStorage.setItem("darkMode", isDarkTheme());

  document.addEventListener("astro:after-swap", () => {
    setDarkClass();
    createThemeColorMetaTag();
  });
</script>
